# Task Script
# Contains Tasks for retrieving and populating the 
# MachineDefaults dictionary with a host's default
# registry keys. Called from List script

# Expected var(s)/fact(s):
# - MachineDefaults (empty or populated)
# - SecCat
# - TaskCat
# - RegTasks (one object)
#   - ID
#   - RegPath
#   - RegName
#   - RegType (unused)
#   - Setting (unused)
#   - Desc (unused)
---
- debug:
    var: RegTasks

- name: "Get {{SecCat}}_{{TaskCat}} defaults"
  win_reg_stat:
    path: "{{ item.RegPath }}"
    name: "{{ item.RegName }}"
  register: KeyResults
  loop: "{{RegTasks}}"

- debug:
    var: KeyResults

# - name: Clear
#   set_fact:
#       KeyDictionary: {}

# - name: Add keys to dictionarys
#   set_fact:
#       KeyDictionary: "{{ KeyDictionary |combine( {item.item.} )}}"