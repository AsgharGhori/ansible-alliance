# Task Script
# Contains Tasks for handling all windows command editing.
# Called from a List Script

# Expected vars/facts:
# - MachineDefaults {} (populated and with SecCat_TaskCat: {} entry)
# - UndoList []
# - SkipList []
# - SecCat
# - TaskCat
# - ComTask [] (looped)
#   - Desc
#   - ID
#   - Value
#   - Command
#   - Strip
---
- name: Initialize facts
  set_fact:
    Sec_Task: "{{ SecCat+'_'+TaskCat }}"
    fullID: "{{ SecCat+'_'+TaskCat+'_'+ComTask.ID }}"

- name: "{{ Sec_Task+' '+ComTask.ID+' > '+ComTask.Desc }}"
  win_command: "{{ ComTask.Command + (ComTask.Value if fullID not in
    UndoList else MachineDefaults[Sec_Task][ComTask.ID])|string }}"
  when : fullID not in SkipList