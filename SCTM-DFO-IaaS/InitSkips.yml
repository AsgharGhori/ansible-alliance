# == Task Script ==
# Appends to the SkipList array based on
# supercategory and global skip variables
---
- name: Check excusive run variable
  set_fact:
    SkipList: "{{ SkipList + ['All'] }}"
  when: not OnlyRun == "None"

- name: Append global skips
  set_fact:
    SkipList: "{{ SkipList + [item] }}"
  loop:
    - UN_AC
    - UN_AU
    - UN_IA
    - UN_SC
    - UN_SI
  when: "'All' in SkipList"

- name: Remove from global skips
  set_fact:
    SkipList: "{{ SkipList |difference([ OnlyRun ]) }}"
  when: OnlyRun in SkipList and not OnlyRun == "None"

- name: Append AC supercategory skips
  set_fact:
    SkipList: "{{ SkipList + [item] }}"
  loop:
    - UN_AC_3
    - UN_AC_4
    - UN_AC_7
    - UN_AC_8
    - UN_AC_11
  when: "'UN_AC' in SkipList"

- name: Append AU supercategory skips
  set_fact:
    SkipList: "{{ SkipList + [item] }}"
  loop:
    - UN_AU_3
    - UN_AU_9
  when: "'UN_AU' in SkipList"

- name: Append IA supercategory skips
  set_fact:
    SkipList: "{{ SkipList + [item] }}"
  loop:
    - UN_IA_2
    - UN_IA_5
  when: "'UN_IA' in SkipList"

- name: Append SC supercategory skips
  set_fact:
    SkipList: "{{ SkipList + [item] }}"
  loop:
    - UN_SC_2
    - UN_SC_5
    - UN_SC_7
    - UN_SC_8
    - UN_SC_10
  when: "'UN_SC' in SkipList"

- name: Append SI supercategory skips
  set_fact:
    SkipList: "{{ SkipList + [item] }}"
  loop:
    - UN_SI_2
    - UN_SI_3
  when: "'UN_SI' in SkipList"

- name: Remove from supercategory skips
  set_fact:
    SkipList: "{{ SkipList |difference([ OnlyRun ]) }}"
  when: OnlyRun in SkipList and not OnlyRun == "None"