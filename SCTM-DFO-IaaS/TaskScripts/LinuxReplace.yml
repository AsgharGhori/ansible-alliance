# == Task Script ==
# Contains tasks for modifying parts of Linux files

# Expected vars/facts:
# - MachineDefaults {} (empty or populated)
# - SecCat
# - TaskCat
# - SwapTask {} (looped)
#   - Desc
#   - ID
#   - Value
#   - Path
#   - Regex
#   - Line
---
- set_fact:
    fullID: "{{ SecCat'_'TaskCat+'_'+SwapTask.ID }}"

- name: "{{ Sec_Task+'_'+SwapTask.ID+' > '+SwapTask.Desc }}"
  replace:
    path: "{{ SwapTask.Path }}"
    regexp: "{{ SwapTask.Regex }}"
    line: "{{ SwapTask.Line + SwapTask.Value }}"
    state: present
  register: thing
  when: not fullID in SkipList

- debug:
    var: thing